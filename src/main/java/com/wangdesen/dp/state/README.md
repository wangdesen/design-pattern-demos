#State-Pattern-demos

---

#### 状态模式
> 允许一个对象在其内部状态改变时改变它的行为，是一种对象行为型模式

#### 模式结构
- Context：环境类
- State：抽象状态类
- ConcreteState：具体状态类

#### UML类图
![state_uml icon](https://design-patterns.readthedocs.io/zh_CN/latest/_images/State.jpg)

#### 时序图
![state_time icon](https://design-patterns.readthedocs.io/zh_CN/latest/_images/seq_State.jpg)

#### 模式分析
- 状态模式描述了对象状态的变化以及对象如何在每一种状态下表现出不同的行为。
- 状态模式的关键是引入了一个抽象状态类来专门表示对象的状态，每一种具体状态类都继承了该类，各自实现了不同状态的行为，包括各种状态之间的转换。
- 环境类可以充当状态管理器(State Manager)的角色，可以在环境类中对状态进行切换操作。

#### 优点
- 封装了转换规则
- 枚举所有可能的状态
- 允许状态转换逻辑和状态对象合为一体，而不是把转换逻辑放在条件语句块中
- 可以让多个环境状态共享一个状态对象，从而减少系统中状态对象的个数

#### 缺点
- 状态模式的使用会增加系统类和对象的个数
- 状态模式的结构和实现比较复杂
- 对“开闭原则”支持不太友好

#### 模式应用
> TCP协议的实现

#### 总结
> 环境类又称为上下文类，它是拥有状态的对象，在环境类中维护一个抽象状态类State的实例，这个实例定义当前状态，在具体实现时，它是一个State子类的对象，可以定义初始状态；
> 抽象状态类用于定义一个接口以封装与环境类的一个特定状态相关的行为；
> 具体状态类是抽象状态类的子类，每一个子类实现一个与环境类的一个状态相关的行为，每一个具体状态类对应环境的一个具体状态，不同的具体状态类其行为有所不同。
